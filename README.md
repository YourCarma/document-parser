# Sova Parser

## Overwiew
–°–æ–≤–∞-–ø–∞—Ä—Å–µ—Ä - –ø—Ä–æ–µ–∫—Ç, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏—Ö –≤ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ —Ç–∞–∫ –∂–µ [–ø–µ—Ä–µ–≤–æ–¥–∞](https://py-googletrans.readthedocs.io/en/latest/) ,[–æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è](https://huggingface.co/coqui/XTTS-v2) –∏ [–∫—Ä–∞—Ç–∫–æ–π –≤—ã–∂–∏–º–∫–∏](http://192.168.0.67:8009/docs#/LLM_Tools/llm_tools_summary_llm_tools_summary_text_post) –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [docling](https://github.com/docling-project/docling) –ø—Ä–∏ –ø–æ–º–æ—â–∏ –¥–≤–∏–∂–∫–∞ [EasyOCR](https://www.jaided.ai/easyocr/documentation/). –ü—Ä–æ—Ü–µ—Å—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç—Å—è –ø–æ –≤–µ–±-—Å–æ–∫–µ—Ç–∞–º, –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è, –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –ø—Ä–æ—Å–ª—É—à–∞—Ç—å —Ç–µ–∫—Å—Ç.    

## Features 
### –ü–æ–¥–¥–µ—Ä–∂–∏–≤—ã–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤:
```python
ALLOWED_MIME_TYPES: List[str] = [
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
    "application/doc",
    "application/msword",
    "application/pdf",
    "image/png",    
    "image/jpeg",
    "image/webp",
    "application/vnd.openxmlformats-officedocument.presentationml.presentation",
    "application/vnd.ms-powerpoint",
]
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏:
```python 
ALLOWED_LANGS: List[str] = ["ru","en","ar","fr","uk"]
```
 - `ru` - –†—É—Å—Å–∫–∏–π
 - `en` - –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (default)
 - `ar` - –ê—Ä–∞–±—Å–∫–∏–π
 - `fr` - –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π
 - `uk` - –£–∫—Ä–∞–∏–Ω—Å–∫–∏–π
  
### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è:
```python 
ALLOWED_CONVERTED_TYPES: List[str] = ["md","json","yaml","txt"]
```
 - `txt` - .txt
 - `json` - .json
 - `yaml` - .yaml
 - `md` - .md
 
### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- üìä –¢–∞–±–ª–∏—Ü—ã
- üñºÔ∏è –ö–∞—Ä—Ç–∏–Ω–∫–∏

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
- –û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ
- –ü–µ—Ä–µ–≤–æ–¥

## Remark
 - `FastAPI` –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ `Swagger` –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∫–µ—Ç—ã, –ø–æ—ç—Ç–æ–º—É –æ—Å—Ç–∞–≤–ª—é –∑–¥–µ—Å—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä—É—á–∫–µ `ws://ip:port/parser/extract`: 
    ### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
     - **path** `[str]` - –ø—É—Ç–∏ –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å 
     - **src_lang** `str` - –≤–æ–∑–º–æ–∂–Ω—ã–µ [—è–∑—ã–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤](#–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ-—è–∑—ã–∫–∏) (`en` - –∞–Ω–≥–ª. –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∑–∞—Ä–∞–Ω–µ–µ)
     - **target_conv_format** `str` - –∂–µ–ª–∞–µ–º—ã–π [—Ñ–æ—Ä–º–∞—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è](#–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ-—Ñ–æ—Ä–º–∞—Ç—ã-–∏–∑–≤–ª–µ—á–µ–Ω–∏—è)
     - **extracted_elements** `[str]` - [–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã](#–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ-—ç–ª–µ–º–µ–Ω—Ç—ã)
     - **translated** `bool` - —Ñ–ª–∞–≥ –¥–ª—è –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
     - **target_lang** `str` - —Ü–µ–ª–µ–≤–æ–π —è–∑—ã–∫ –ø–µ—Ä–µ–≤–æ–¥–∞ 
     - **max_num_page** `int` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ, –ü–û –ö–û–¢–û–†–£–Æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥ 
     ```python
        PAGE_RANGE = (1,max_num_page) # -> —Å 1-–π –ø–æ n-—É—é
     ```    
     - **prefer_description** ``bool`` - —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π   
        - `True` - –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–∞–º–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –æ–ø–∏—Å–∞—Ç—å –µ–≥–æ 
        - `False` - –∏–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è 
    
    ### –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    ```json
        [
            "filename":{
                "text":"–ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç",
                "summary":"–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞",
                "images":["–ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º"],
                "tables":["–ø—É—Ç—å –∫ —Ç–∞–±–ª–∏—Ü–∞–º"],
            }
        ]
    ```
 - –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/documents` –ª–µ–∂–∞—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
    –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/scratch`, –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ –∏–º–µ–Ω–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏, —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –æ—Ç–¥–µ–ª—å–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ –∏ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ–≤–æ–¥–∞ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã (–∫–∞—Ä—Ç–∏–Ω–∫–∏ - `pictures`, —Ç–∞–±–ª–∏—Ü—ã - `tables`) –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.
 - –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å –∫–∞–∂–¥—ã–º —Ñ–∞–π–ª–æ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –≤ `Webhook Manager Service`

## Quick start

1.  –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏

    ```shell
    docker build -t sova-parser:version .
    ```

2) –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞  

    ```shell
    docker run -d \
        --name sova-parser \
        -p 1337:1337 \
        --restart unless-stopped \
        sova-parser:version 
    ```
3) –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

    ```shell
    docker logs -f sova-parser
    ```